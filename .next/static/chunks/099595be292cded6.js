(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95018,e=>{"use strict";e.s(["filterPhoneInput",0,e=>e.replace(/[^0-9\-()+ ]/g,""),"getFieldInputType",0,e=>{let r=e.toLowerCase();return r.includes("phone")||r.includes("contact")?"tel":r.includes("email")?"email":r.includes("date")?"date":(r.includes("ip"),"text")},"getFieldPattern",0,e=>{let r=e.toLowerCase();if(r.includes("phone")||r.includes("contact"))return"[0-9\\-()\\+ ]*"},"validateFieldInput",0,(e,r)=>{if(!r)return{valid:!0};let t=e.toLowerCase();if(t.includes("phone")||t.includes("contact"))return/^[0-9\-()+ ]*$/.test(r)?{valid:!0}:{valid:!1,error:"Phone number can only contain numbers, dashes, parentheses, plus sign, and spaces"};if(t.includes("email"))return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?{valid:!0}:{valid:!1,error:"Please enter a valid email address"};if(t.includes("title"))return 0===r.trim().length?{valid:!1,error:"Title cannot be empty"}:r.length>100?{valid:!1,error:"Title must be 100 characters or less"}:{valid:!0};if(t.includes("description")){if(0===r.trim().length)return{valid:!1,error:"Description cannot be empty"};if(r.length>500)return{valid:!1,error:"Description must be 500 characters or less"}}return{valid:!0}}])},10433,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(95018),n=e.i(8303);function l(){let[e,l]=(0,t.useState)(""),[d,u]=(0,t.useState)({}),p=(0,s.useRouter)(),m=async r=>{r.preventDefault();let t=new FormData(r.currentTarget),s={},l={};if(t.forEach((e,r)=>{if(null!==e){let t=e.toString();s[r]=t;let n=(0,a.validateFieldInput)(r,t);!n.valid&&n.error&&(l[r]=n.error)}}),Object.keys(l).length>0){u(l),(0,n.addToast)("Please fix the validation errors","error");return}u({}),s.category=e;try{let e,r=await fetch("/dashboard/requests/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});try{e=await r.json()}catch(e){console.error("Failed to parse JSON:",e),(0,n.addToast)("Server returned invalid response","error");return}e.success?((0,n.addToast)("Request created successfully!","success"),p.push("/dashboard/requests")):(0,n.addToast)(e.message||"Failed to create request","error")}catch(e){console.error("Fetch failed:",e),(0,n.addToast)("Could not submit request. Check your network or server.","error")}};return(0,r.jsxs)("div",{className:"flex gap-8",children:[(0,r.jsxs)("aside",{className:"w-64 bg-gray-100 border border-gray-300 rounded-lg p-4",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Categories"}),(0,r.jsxs)("select",{name:"category",className:"w-full border border-gray-400 rounded px-3 py-2 cursor-pointer",value:e,onChange:e=>l(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),(0,r.jsx)("option",{value:"network",children:"Network"}),(0,r.jsx)("option",{value:"carpentry",children:"Carpentry"}),(0,r.jsx)("option",{value:"hardware",children:"Hardware"}),(0,r.jsx)("option",{value:"vehicle",children:"Vehicle"}),(0,r.jsx)("option",{value:"supplies",children:"Supplies"})]})]}),(0,r.jsxs)("section",{className:"flex-1 bg-white border border-gray-300 rounded-lg p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Create Service Request"}),e?(0,r.jsxs)("form",{className:"space-y-4",onSubmit:m,children:[(0,r.jsx)(o,{name:"title",label:"Request Title",error:d.title}),(0,r.jsx)(i,{name:"description",label:"Problem Description",error:d.description}),(0,r.jsx)(o,{name:"requester",label:"Requester Name",error:d.requester}),(0,r.jsx)(o,{name:"department",label:"Department / Office",error:d.department}),(0,r.jsx)(o,{name:"contact",label:"Contact Number",error:d.contact,onPhoneInput:!0}),(0,r.jsx)(c,{name:"priority",label:"Priority",options:["Low","Medium","High"]}),(0,r.jsx)(o,{name:"date",label:"Date Needed",type:"date",error:d.date}),"network"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{name:"issueType",label:"Network Issue Type",options:["No Internet","Slow Connection","Intermittent"]}),(0,r.jsx)(o,{name:"location",label:"Location / Room Number",error:d.location}),(0,r.jsx)(o,{name:"device",label:"Device Affected",error:d.device}),(0,r.jsx)(o,{name:"ip",label:"IP Address (Optional)",error:d.ip})]}),(0,r.jsx)("button",{type:"submit",className:"bg-gray-800 text-white px-6 py-2 rounded hover:bg-black transition cursor-pointer",children:"Submit Request"})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"Please select a category to load the form."})]})]})}function o({label:e,type:t="text",name:s,error:n,onPhoneInput:l=!1}){let o=(0,a.getFieldInputType)(s)||t,i=(0,a.getFieldPattern)(s);return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-600 mb-1",children:e}),(0,r.jsx)("input",{name:s,type:o,pattern:i,onChange:e=>{l&&(e.target.value=(0,a.filterPhoneInput)(e.target.value))},className:`w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 ${n?"border-red-500 focus:ring-red-500":"focus:ring-gray-800"}`,title:"tel"===o?"Phone number can only contain numbers, dashes, parentheses, plus sign, and spaces":""}),n&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:n})]})}function i({label:e,name:t,error:s}){return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-600 mb-1",children:e}),(0,r.jsx)("textarea",{name:t,rows:3,className:`w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 ${s?"border-red-500 focus:ring-red-500":"focus:ring-gray-800"}`}),s&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-1",children:s})]})}function c({label:e,options:t,name:s}){return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-600 mb-1",children:e}),(0,r.jsxs)("select",{name:s,className:"w-full border rounded px-3 py-2 cursor-pointer focus:outline-none focus:ring-2 focus:ring-gray-800",children:[(0,r.jsx)("option",{value:"",children:"Select"}),t.map(e=>(0,r.jsx)("option",{children:e},e))]})]})}e.s(["default",()=>l])}]);