module.exports=[70069,a=>{"use strict";a.s(["filterPhoneInput",0,a=>a.replace(/[^0-9\-()+ ]/g,""),"getFieldInputType",0,a=>{let b=a.toLowerCase();return b.includes("phone")||b.includes("contact")?"tel":b.includes("email")?"email":b.includes("date")?"date":(b.includes("ip"),"text")},"getFieldPattern",0,a=>{let b=a.toLowerCase();if(b.includes("phone")||b.includes("contact"))return"[0-9\\-()\\+ ]*"},"validateFieldInput",0,(a,b)=>{if(!b)return{valid:!0};let c=a.toLowerCase();if(c.includes("phone")||c.includes("contact"))return/^[0-9\-()+ ]*$/.test(b)?{valid:!0}:{valid:!1,error:"Phone number can only contain numbers, dashes, parentheses, plus sign, and spaces"};if(c.includes("email"))return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b)?{valid:!0}:{valid:!1,error:"Please enter a valid email address"};if(c.includes("title"))return 0===b.trim().length?{valid:!1,error:"Title cannot be empty"}:b.length>100?{valid:!1,error:"Title must be 100 characters or less"}:{valid:!0};if(c.includes("description")){if(0===b.trim().length)return{valid:!1,error:"Description cannot be empty"};if(b.length>500)return{valid:!1,error:"Description must be 500 characters or less"}}return{valid:!0}}])},16184,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(70069),f=a.i(43690);function g(){let[a,g]=(0,c.useState)(""),[k,l]=(0,c.useState)({}),m=(0,d.useRouter)(),n=async b=>{b.preventDefault();let c=new FormData(b.currentTarget),d={},g={};if(c.forEach((a,b)=>{if(null!==a){let c=a.toString();d[b]=c;let f=(0,e.validateFieldInput)(b,c);!f.valid&&f.error&&(g[b]=f.error)}}),Object.keys(g).length>0){l(g),(0,f.addToast)("Please fix the validation errors","error");return}l({}),d.category=a;try{let a,b=await fetch("/dashboard/requests/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});try{a=await b.json()}catch(a){console.error("Failed to parse JSON:",a),(0,f.addToast)("Server returned invalid response","error");return}a.success?((0,f.addToast)("Request created successfully!","success"),m.push("/dashboard/requests")):(0,f.addToast)(a.message||"Failed to create request","error")}catch(a){console.error("Fetch failed:",a),(0,f.addToast)("Could not submit request. Check your network or server.","error")}};return(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsxs)("aside",{className:"w-64 bg-gray-100 border border-gray-300 rounded-lg p-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Categories"}),(0,b.jsxs)("select",{name:"category",className:"w-full border border-gray-400 rounded px-3 py-2 cursor-pointer",value:a,onChange:a=>g(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"Select Category"}),(0,b.jsx)("option",{value:"network",children:"Network"}),(0,b.jsx)("option",{value:"carpentry",children:"Carpentry"}),(0,b.jsx)("option",{value:"hardware",children:"Hardware"}),(0,b.jsx)("option",{value:"vehicle",children:"Vehicle"}),(0,b.jsx)("option",{value:"supplies",children:"Supplies"})]})]}),(0,b.jsxs)("section",{className:"flex-1 bg-white border border-gray-300 rounded-lg p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-800 mb-6",children:"Create Service Request"}),a?(0,b.jsxs)("form",{className:"space-y-4",onSubmit:n,children:[(0,b.jsx)(h,{name:"title",label:"Request Title",error:k.title}),(0,b.jsx)(i,{name:"description",label:"Problem Description",error:k.description}),(0,b.jsx)(h,{name:"requester",label:"Requester Name",error:k.requester}),(0,b.jsx)(h,{name:"department",label:"Department / Office",error:k.department}),(0,b.jsx)(h,{name:"contact",label:"Contact Number",error:k.contact,onPhoneInput:!0}),(0,b.jsx)(j,{name:"priority",label:"Priority",options:["Low","Medium","High"]}),(0,b.jsx)(h,{name:"date",label:"Date Needed",type:"date",error:k.date}),"network"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j,{name:"issueType",label:"Network Issue Type",options:["No Internet","Slow Connection","Intermittent"]}),(0,b.jsx)(h,{name:"location",label:"Location / Room Number",error:k.location}),(0,b.jsx)(h,{name:"device",label:"Device Affected",error:k.device}),(0,b.jsx)(h,{name:"ip",label:"IP Address (Optional)",error:k.ip})]}),(0,b.jsx)("button",{type:"submit",className:"bg-gray-800 text-white px-6 py-2 rounded hover:bg-black transition cursor-pointer",children:"Submit Request"})]}):(0,b.jsx)("p",{className:"text-gray-500",children:"Please select a category to load the form."})]})]})}function h({label:a,type:c="text",name:d,error:f,onPhoneInput:g=!1}){let h=(0,e.getFieldInputType)(d)||c,i=(0,e.getFieldPattern)(d);return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-600 mb-1",children:a}),(0,b.jsx)("input",{name:d,type:h,pattern:i,onChange:a=>{g&&(a.target.value=(0,e.filterPhoneInput)(a.target.value))},className:`w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 ${f?"border-red-500 focus:ring-red-500":"focus:ring-gray-800"}`,title:"tel"===h?"Phone number can only contain numbers, dashes, parentheses, plus sign, and spaces":""}),f&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f})]})}function i({label:a,name:c,error:d}){return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-600 mb-1",children:a}),(0,b.jsx)("textarea",{name:c,rows:3,className:`w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 ${d?"border-red-500 focus:ring-red-500":"focus:ring-gray-800"}`}),d&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d})]})}function j({label:a,options:c,name:d}){return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-600 mb-1",children:a}),(0,b.jsxs)("select",{name:d,className:"w-full border rounded px-3 py-2 cursor-pointer focus:outline-none focus:ring-2 focus:ring-gray-800",children:[(0,b.jsx)("option",{value:"",children:"Select"}),c.map(a=>(0,b.jsx)("option",{children:a},a))]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_c5df3981._.js.map